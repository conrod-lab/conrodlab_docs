<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Access &mdash; Courtois NeuroMod 2020-beta documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/logo_neuromod_small.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MRI" href="MRI.html" />
    <link rel="prev" title="Datasets" href="DATASETS.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Courtois NeuroMod
            <img src="_static/logo_neuromod_black.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="DATASETS.html">Datasets</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data-transfer-agreement-dta">Data Transfer Agreement (DTA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ethics">Ethics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-the-dataset">Downloading the dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#versioning">Versioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preprocessed-data">Preprocessed data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stimuli-and-event-files">Stimuli and event files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#updates">Updates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="MRI.html">MRI</a></li>
<li class="toctree-l1"><a class="reference internal" href="DERIVATIVES.html">Derivatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASES.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="COC.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="AUTHORS.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="ACKNOWLEDGMENT.html">How to acknowledge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Courtois NeuroMod</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Access</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ACCESS.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="access">
<h1>Access<a class="headerlink" href="#access" title="Permalink to this heading"></a></h1>
<section id="data-transfer-agreement-dta">
<h2>Data Transfer Agreement (DTA)<a class="headerlink" href="#data-transfer-agreement-dta" title="Permalink to this heading"></a></h2>
<p>To access the cneuromod dataset, it is required to complete a form with a brief description of planned analyses, and complete an inter-institutional data transfer agreement. Links to relevant forms can be found on the <a class="reference external" href="https://www.cneuromod.ca/access/access/">access request page</a>.The data transfer agreement must be signed by the researcher responsible for the project as well as a representative of the main academic institution where the research team is affiliated. The application will be evaluated by a data access committee and, if approved, a transfer key will be shared with the research team in order to transfer the data (see <a class="reference internal" href="#downloading"><span class="std std-ref">Downloading the dataset</span></a> section below).</p>
</section>
<section id="ethics">
<h2>Ethics<a class="headerlink" href="#ethics" title="Permalink to this heading"></a></h2>
<p>The Courtois NeuroMod project has been approved by the institutional research ethics board of the <a class="reference external" href="https://ciusss-centresudmtl.gouv.qc.ca/propos/services-en-anglais">CIUSSS du Centre-Sud-de-l’île-de-Montréal</a>. The CIUSSS is a large governmental health organization, and the core NeuroMod team is based at the Research Centre of the Montreal Geriatric Institute (<a class="reference external" href="http://www.criugm.qc.ca/en.html">CRIUGM</a>), which is a part of the CIUSSS, and affiliated with the <a class="reference external" href="https://www.umontreal.ca/">University of Montreal</a>. The consent forms signed by participants and the project description are available below. The formal authorization lettre from the ethics committee is available upon request.</p>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="_downloads/fd242d2267aa78a20401de71c371cb11/courtois_neuromod_project_description.pdf"><span class="xref download myst">courtois_neuromod_project_description.pdf</span></a>: scientific overview of the Courtois NeuroMod project (in English).</p></li>
<li><p><a class="reference download internal" download="" href="_downloads/39146424baeda1a427243aaa66fdd088/consent_form_english.pdf"><span class="xref download myst">consent_form_english.pdf</span></a>: the informed consent form signed by participants (English version).</p></li>
<li><p><a class="reference download internal" download="" href="_downloads/b472f9c907b17b26845761bb05b07ad4/consent_form_french.pdf"><span class="xref download myst">consent_form_french.pdf</span></a>: the informed consent form signed by participants (French version).</p></li>
</ul>
</section>
<section id="downloading-the-dataset">
<span id="downloading"></span><h2>Downloading the dataset<a class="headerlink" href="#downloading-the-dataset" title="Permalink to this heading"></a></h2>
<p>All data are made available as a <a class="reference external" href="https://github.com/courtois-neuromod/cneuromod">DataLad collection (currently requires to be part of the cneuromod team)</a> on github.
<a class="reference external" href="https://www.datalad.org/">DataLad</a> is a tool for versioning a large data structure in a git repository. The dataset can be explored without downloading the data, and it is easy to only download the subset of the data you need for your project.
See the <a class="reference external" href="http://handbook.datalad.org/en/latest/">DataLad handbook</a> for further information.</p>
<p>We recommend creating an SSH key (if not already present) on the machine on which the dataset will be installed and adding it to github. See the official <a class="reference external" href="https://help.github.com/en/enterprise/2.15/user/articles/adding-a-new-ssh-key-to-your-github-account">github instructions</a> on how to create and add a key to your account.</p>
<p>To obtain the data, you need to install a recent version of the <a class="reference external" href="http://handbook.datalad.org/en/latest/intro/installation.html">DataLad software</a>, available for Linux, OSX and Windows. Note that you need to have valid login credentials to access the NeuroMod git as well as the NeuroMod <a class="reference external" href="https://aws.amazon.com/s3">Amazon S3</a> fileserver. Once you have obtained these credentials, you can proceed as follows in a terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install recursively the dataset and subdataset of the current project.</span>
<span class="c1"># If using ssh git clone as follow, you can set your public SSH key in the present git to ease future updates.</span>
<span class="n">datalad</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">courtois</span><span class="o">-</span><span class="n">neuromod</span><span class="o">/</span><span class="n">cneuromod</span><span class="o">.</span><span class="n">git</span>
<span class="c1"># If errors show up relative to .heudiconv subdataset/submodule, this is OK, they are not published (will be cleaned up in the future).</span>
<span class="n">cd</span> <span class="n">cneuromod</span>
</pre></div>
</div>
<section id="versioning">
<h3>Versioning<a class="headerlink" href="#versioning" title="Permalink to this heading"></a></h3>
<p>By default, this will install the latest stable release of the dataset, which is the recommended version to get for a new analysis.
If you are need to work on a specific version (for instance to reproduce a result), you can change to the appropriate tag with.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="mi">2020</span>
</pre></div>
</div>
<p>We now set as environment variable the credentials to the file server. The s3 access_key and secret_key will be provided by the data manager after being granted access to cneuromod by the user access committee.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This needs to be set in your `bash` everytime you want to download data.</span>
<span class="n">export</span> <span class="n">AWS_ACCESS_KEY_ID</span><span class="o">=&lt;</span><span class="n">s3_access_key</span><span class="o">&gt;</span>  <span class="n">AWS_SECRET_ACCESS_KEY</span><span class="o">=&lt;</span><span class="n">s3_secret_key</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="preprocessed-data">
<h3>Preprocessed data<a class="headerlink" href="#preprocessed-data" title="Permalink to this heading"></a></h3>
<p>For analysis of fMRI data, it is preferable to directly get the preprocessed data (smriprep and fmriprep for now).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">install</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">courtois</span><span class="o">-</span><span class="n">neuromod</span><span class="o">/</span><span class="n">cneuromod</span><span class="o">.</span><span class="n">processed</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">cneuromod</span><span class="o">.</span><span class="n">processed</span>
</pre></div>
</div>
<p>You can install the sub-datasets you are interested in (instead of installing all of them) using for instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">get</span> <span class="o">-</span><span class="n">n</span> <span class="n">smriprep</span> <span class="n">fmriprep</span><span class="o">/</span><span class="n">movie10</span>
</pre></div>
</div>
<p>and then get only the files you need (for instance MNI space output):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">get</span> <span class="n">smriprep</span><span class="o">/</span><span class="n">sub</span><span class="o">-*/</span><span class="n">anat</span><span class="o">/*</span><span class="n">space</span><span class="o">-</span><span class="n">MNI152NLin2009cAsym_</span><span class="o">*</span> <span class="c1"># get all anatomical output in MNI space</span>
<span class="n">datalad</span> <span class="n">get</span> <span class="n">fmriprep</span><span class="o">/</span><span class="n">movie10</span><span class="o">/</span><span class="n">sub</span><span class="o">-*/</span><span class="n">ses</span><span class="o">-*/</span><span class="n">func</span><span class="o">/*</span><span class="n">space</span><span class="o">-</span><span class="n">MNI152NLin2009cAsym_</span><span class="o">*</span> <span class="c1"># get all functional output in MNI space</span>
</pre></div>
</div>
<p>You can add the flag <code class="docutils literal notranslate"><span class="pre">-J</span> <span class="pre">n</span></code> to download files in parallel with <code class="docutils literal notranslate"><span class="pre">n</span></code> being the number of threads to use.</p>
<p>The source data used for preprocessing (including raw data) are referenced as sources in the preprocessed dataset following <a class="reference external" href="https://handbook.datalad.org/en/latest/basics/101-127-yoda.html">Yoda</a>, so as to track provenance.
You can also track the version of the cneuromod dataset you are using by installing it in a datalad dataset created for your project.</p>
</section>
<section id="stimuli-and-event-files">
<h3>Stimuli and event files<a class="headerlink" href="#stimuli-and-event-files" title="Permalink to this heading"></a></h3>
<p>You will likely need the events files and stimuli for your analysis which can be obtained from the sourcedata reference sub-datasets, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">get</span> <span class="o">-</span><span class="n">r</span> <span class="n">fmriprep</span><span class="o">/</span><span class="n">movie10</span><span class="o">/</span><span class="n">sourcedata</span><span class="o">/</span><span class="n">movie10</span><span class="o">/</span><span class="n">stimuli</span> <span class="n">fmriprep</span><span class="o">/</span><span class="n">movie10</span><span class="o">/</span><span class="n">sourcedata</span><span class="o">/</span><span class="n">movie10</span><span class="o">/*</span><span class="n">_events</span><span class="o">.</span><span class="n">tsv</span>
</pre></div>
</div>
<p>or to get subject specific event files for tasks collecting behavioral responses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">get</span> <span class="o">-</span><span class="n">r</span> <span class="n">fmriprep</span><span class="o">/</span><span class="n">movie10</span><span class="o">/</span><span class="n">sourcedata</span><span class="o">/</span><span class="n">hcptrt</span><span class="o">/</span><span class="n">sub</span><span class="o">-*/</span><span class="n">ses</span><span class="o">-*/</span><span class="n">func</span><span class="o">/*</span><span class="n">_events</span><span class="o">.</span><span class="n">tsv</span>
</pre></div>
</div>
</section>
</section>
<section id="updates">
<h2>Updates<a class="headerlink" href="#updates" title="Permalink to this heading"></a></h2>
<p>The dataset will be updated with new releases so you might want to get these changes (unless you are currently running analyses, or trying to reproduce results). The main branches of all datasets will always track the latest stable release.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># update the dataset recursively</span>
<span class="n">datalad</span> <span class="n">update</span> <span class="o">-</span><span class="n">r</span> <span class="o">--</span><span class="n">merge</span> <span class="o">--</span><span class="n">reobtain</span><span class="o">-</span><span class="n">data</span>

</pre></div>
</div>
<p>Once your local dataset clone is updated, you might need to pull new data, as some files could have been added or modified. The <code class="docutils literal notranslate"><span class="pre">--reobtain-data</span></code> flag should automatically pull files that you had already downloaded in case these were modified.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="DATASETS.html" class="btn btn-neutral float-left" title="Datasets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="MRI.html" class="btn btn-neutral float-right" title="MRI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Courtois NeuroMod team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>